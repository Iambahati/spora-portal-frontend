{"version":3,"file":"use-auth-check-DT23GU2D.js","sources":["../../router/hooks/use-auth-check.ts"],"sourcesContent":["import { useState, useEffect } from \"react\"\n\ninterface AuthState {\n  isAuthenticated: boolean\n  isLoading: boolean\n  user: {\n    name: string\n    email: string\n  } | null\n}\n\nexport function useAuthCheck() {\n  const [authState, setAuthState] = useState<AuthState>({\n    isAuthenticated: false,\n    isLoading: true,\n    user: null\n  })\n\n  useEffect(() => {\n    checkAuthStatus()\n  }, [])\n\n  const checkAuthStatus = async () => {\n    try {\n      const token = localStorage.getItem(\"auth_token\")\n      \n      if (!token) {\n        setAuthState({\n          isAuthenticated: false,\n          isLoading: false,\n          user: null\n        })\n        return\n      }\n\n      // Validate token with your Laravel API\n      const response = await fetch(\"/api/user/profile\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const userData = await response.json()\n        setAuthState({\n          isAuthenticated: true,\n          isLoading: false,\n          user: userData\n        })\n      } else {\n        // Invalid token, remove it\n        localStorage.removeItem(\"auth_token\")\n        setAuthState({\n          isAuthenticated: false,\n          isLoading: false,\n          user: null\n        })\n      }\n    } catch (error) {\n      console.error(\"Auth check failed:\", error)\n      setAuthState({\n        isAuthenticated: false,\n        isLoading: false,\n        user: null\n      })\n    }\n  }\n\n  const login = (token: string, userData: any) => {\n    localStorage.setItem(\"auth_token\", token)\n    setAuthState({\n      isAuthenticated: true,\n      isLoading: false,\n      user: userData\n    })\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"auth_token\")\n    setAuthState({\n      isAuthenticated: false,\n      isLoading: false,\n      user: null\n    })\n  }\n\n  return {\n    ...authState,\n    login,\n    logout,\n    checkAuthStatus\n  }\n}\n"],"names":["useAuthCheck","authState","setAuthState","useState","useEffect","checkAuthStatus","token","response","userData","error"],"mappings":"wCAWO,SAASA,GAAe,CAC7B,KAAM,CAACC,EAAWC,CAAY,EAAIC,WAAoB,CACpD,gBAAiB,GACjB,UAAW,GACX,KAAM,IAAA,CACP,EAEDC,EAAAA,UAAU,IAAM,CACEC,EAAA,CAClB,EAAG,EAAE,EAEL,MAAMA,EAAkB,SAAY,CAC9B,GAAA,CACI,MAAAC,EAAQ,aAAa,QAAQ,YAAY,EAE/C,GAAI,CAACA,EAAO,CACGJ,EAAA,CACX,gBAAiB,GACjB,UAAW,GACX,KAAM,IAAA,CACP,EACD,MAAA,CAII,MAAAK,EAAW,MAAM,MAAM,oBAAqB,CAChD,QAAS,CACP,cAAe,UAAUD,CAAK,EAAA,CAChC,CACD,EAED,GAAIC,EAAS,GAAI,CACT,MAAAC,EAAW,MAAMD,EAAS,KAAK,EACxBL,EAAA,CACX,gBAAiB,GACjB,UAAW,GACX,KAAMM,CAAA,CACP,CAAA,MAGD,aAAa,WAAW,YAAY,EACvBN,EAAA,CACX,gBAAiB,GACjB,UAAW,GACX,KAAM,IAAA,CACP,QAEIO,EAAO,CACN,QAAA,MAAM,qBAAsBA,CAAK,EAC5BP,EAAA,CACX,gBAAiB,GACjB,UAAW,GACX,KAAM,IAAA,CACP,CAAA,CAEL,EAoBO,MAAA,CACL,GAAGD,EACH,MApBY,CAACK,EAAeE,IAAkB,CACjC,aAAA,QAAQ,aAAcF,CAAK,EAC3BJ,EAAA,CACX,gBAAiB,GACjB,UAAW,GACX,KAAMM,CAAA,CACP,CACH,EAcE,OAZa,IAAM,CACnB,aAAa,WAAW,YAAY,EACvBN,EAAA,CACX,gBAAiB,GACjB,UAAW,GACX,KAAM,IAAA,CACP,CACH,EAME,gBAAAG,CACF,CACF"}